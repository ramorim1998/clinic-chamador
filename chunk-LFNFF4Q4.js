import{b as F,d as p,f as E,i as u,j as g,k as h,m as x}from"./chunk-F5ZOY5I2.js";import{Aa as C,Ea as _,Ia as M,Oa as d,Pa as i,Qa as r,Ra as O,Ta as P,Va as v,Xa as c,Ya as m,Za as y,_a as z,db as S,qa as a,qb as k,rb as q,sb as w}from"./chunk-HTKN4SOM.js";var I=(s,o)=>[s,o];function Y(s,o){if(s&1&&(i(0,"div",11),c(1),r()),s&2){let b=o.$implicit;a(),z(" ",b.nome," \u2014 ",b.sala," ")}}var N=(()=>{let o=class o{constructor(e){this.firestore=e,this.temaStyles={},this.temaCores={espaco:{texto:"#ffffff",sombra:"rgba(0,0,0,0.6)",destaque:"#9ecbff"},princesa:{texto:"#ff72c6",sombra:"rgba(255,255,255,0.8)",destaque:"#ffd6f3"},robo:{texto:"#b6e2ff",sombra:"rgba(0,0,0,0.5)",destaque:"#7fb8d8"},dinossauro:{texto:"#c2ffb8",sombra:"rgba(0,70,0,0.7)",destaque:"#8ee48c"},floresta:{texto:"#d4ffcb",sombra:"rgba(0,0,0,0.6)",destaque:"#a6e89c"}},this.ultimoChamado=null,this.historico=[],this.tema="",this.listenChamados()}listenChamados(){let e=E(this.firestore,"chamados"),n=h(e,x("status","==",!0),g("chamadoAt","desc"),u(1));p(n,{idField:"id"}).subscribe(f=>{if(f.length===0)return;let l=f[0];(!this.ultimoChamado||this.ultimoChamado.id!==l.id||this.ultimoChamado.chamadoAt!==l.chamadoAt)&&(this.ultimoChamado=l,this.sortearTema(),this.falarChamado(l))});let t=h(e,x("status","==",!0),g("chamadoAt","desc"),u(6));p(t,{idField:"id"}).subscribe(f=>{this.historico=f.slice(1),this.historico=[...this.historico]})}desbloquearVoz(){let e=new SpeechSynthesisUtterance(" ");e.lang="pt-BR",speechSynthesis.speak(e)}sortearTema(){let e=Object.keys(this.temaCores);this.tema="",setTimeout(()=>{let n=e[Math.floor(Math.random()*e.length)];this.tema=n,this.temaStyles=this.temaCores[n]},80)}falarChamado(e){if(!e)return;let n=`Chamando ${e.nome}. Por favor dirigir-se \xE0 ${e.sala}. Senha ${e.senha}.`,t=new SpeechSynthesisUtterance(n);t.lang="pt-BR",t.rate=.95,t.pitch=1.1,t.volume=1,speechSynthesis.cancel(),speechSynthesis.speak(t)}};o.\u0275fac=function(n){return new(n||o)(C(F))},o.\u0275cmp=_({type:o,selectors:[["app-chamador"]],decls:18,vars:15,consts:[["id","unlock-voice",2,"opacity","0","position","absolute","pointer-events","auto",3,"click"],[1,"chamador-root"],[1,"left"],[1,"cenario",3,"ngClass"],[1,"conteudo"],[1,"tema"],[1,"paciente"],[1,"sala"],[1,"senha"],[1,"right"],["class","card-historico",4,"ngFor","ngForOf"],[1,"card-historico"]],template:function(n,t){n&1&&(i(0,"button",0),P("click",function(){return t.desbloquearVoz()}),c(1,` desbloquear voz
`),r(),i(2,"div",1)(3,"div",2),O(4,"div",3),i(5,"div",4)(6,"div",5),c(7),r(),i(8,"div",6),c(9),r(),i(10,"div",7),c(11),r(),i(12,"div",8),c(13),r()()(),i(14,"div",9)(15,"h3"),c(16,"\xDAltimas Chamadas"),r(),M(17,Y,2,2,"div",10),r()()),n&2&&(a(3),v("--texto",t.temaStyles.texto)("--sombra",t.temaStyles.sombra)("--destaque",t.temaStyles.destaque),a(),d("ngClass",S(12,I,t.tema,t.tema?"ativo":"")),a(3),m(t.tema),a(2),m(t.ultimoChamado==null?null:t.ultimoChamado.nome),a(2),m(t.ultimoChamado==null?null:t.ultimoChamado.sala),a(2),y("Senha: ",t.ultimoChamado==null?null:t.ultimoChamado.senha),a(4),d("ngForOf",t.historico))},dependencies:[w,k,q],styles:['@charset "UTF-8";.chamador-root[_ngcontent-%COMP%]{display:flex;gap:40px;padding:40px;height:100vh;background:linear-gradient(135deg,#e7f3ff,#fefcff);font-family:Poppins,sans-serif;--texto: #333;--sombra: rgba(0,0,0,.3);--destaque: #0984e3;color:var(--texto)}@media (max-width: 900px){.chamador-root[_ngcontent-%COMP%]{flex-direction:column;height:auto}}.left[_ngcontent-%COMP%]{position:relative;overflow:hidden;background:#fff;flex:2;border-radius:24px;padding:40px;box-shadow:0 6px 20px #00000014;display:flex;flex-direction:column;align-items:center;justify-content:center;animation:_ngcontent-%COMP%_fadeIn .6s ease}.left[_ngcontent-%COMP%]   .tema[_ngcontent-%COMP%]{font-size:2rem;font-weight:600;color:var(--destaque);margin-bottom:20px;text-transform:capitalize;text-shadow:2px 2px 6px var(--sombra)}.left[_ngcontent-%COMP%]   .paciente[_ngcontent-%COMP%]{font-size:3.6rem;font-weight:700;margin-bottom:10px;text-align:center;color:var(--texto);text-shadow:2px 2px 6px var(--sombra)}.left[_ngcontent-%COMP%]   .sala[_ngcontent-%COMP%]{font-size:2rem;font-weight:500;margin-bottom:20px;color:var(--texto);text-shadow:2px 2px 6px var(--sombra)}.left[_ngcontent-%COMP%]   .senha[_ngcontent-%COMP%]{margin-top:25px;font-size:2.2rem;font-weight:600;color:var(--destaque);text-shadow:2px 2px 6px var(--sombra)}.right[_ngcontent-%COMP%]{flex:1;background:#fff;border-radius:24px;padding:30px;box-shadow:0 6px 20px #00000014}.right[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.8rem;margin-bottom:20px;color:var(--destaque)}.right[_ngcontent-%COMP%]   .card-historico[_ngcontent-%COMP%]{background:#f1f5ff;padding:18px;border-radius:14px;margin-bottom:12px;font-size:1.4rem;font-weight:500;color:var(--texto);border-left:6px solid var(--destaque);box-shadow:0 3px 8px #0000000f;animation:_ngcontent-%COMP%_slide .4s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slide{0%{opacity:0;transform:translate(10px)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_bounce{0%{transform:scale(.95)}60%{transform:scale(1.05)}to{transform:scale(1)}}.cenario[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:1;border-radius:24px;opacity:0;transform:scale(1.05);transition:all .7s ease}.conteudo[_ngcontent-%COMP%]{position:relative;z-index:10}.cenario.dinossauro[_ngcontent-%COMP%]{background:linear-gradient(135deg,#c8f7c5,#78e08f)}.cenario.dinossauro[_ngcontent-%COMP%]:before{content:"\\1f996";position:absolute;font-size:120px;bottom:20px;left:20px;opacity:.8;animation:_ngcontent-%COMP%_flutuar 5s ease-in-out infinite}.cenario.dinossauro[_ngcontent-%COMP%]:after{content:"\\1f334";position:absolute;font-size:90px;top:30px;right:30px;opacity:.7;animation:_ngcontent-%COMP%_flutuar2 6s ease-in-out infinite}.cenario.princesa[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffd6ff,#f7a8ff)}.cenario.princesa[_ngcontent-%COMP%]:before{content:"\\1f3f0";position:absolute;font-size:110px;bottom:25px;left:25px;opacity:.8;animation:_ngcontent-%COMP%_flutuar 5s ease-in-out infinite}.cenario.princesa[_ngcontent-%COMP%]:after{content:"\\1f478";position:absolute;font-size:100px;top:25px;right:35px;opacity:.7;animation:_ngcontent-%COMP%_flutuar2 6s ease-in-out infinite}.cenario.robo[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dfe6e9,#b2bec3)}.cenario.robo[_ngcontent-%COMP%]:before{content:"\\1f916";position:absolute;font-size:110px;bottom:25px;left:25px;opacity:.8;animation:_ngcontent-%COMP%_flutuar 4.5s ease-in-out infinite}.cenario.robo[_ngcontent-%COMP%]:after{content:"\\26a1";position:absolute;font-size:90px;top:20px;right:40px;opacity:.7;animation:_ngcontent-%COMP%_flutuar2 5.5s ease-in-out infinite}.cenario.floresta[_ngcontent-%COMP%]{background:linear-gradient(135deg,#b8e994,#78e08f)}.cenario.floresta[_ngcontent-%COMP%]:before{content:"\\1f98b";position:absolute;font-size:90px;bottom:30px;left:40px;animation:_ngcontent-%COMP%_flutuar 4s ease-in-out infinite}.cenario.floresta[_ngcontent-%COMP%]:after{content:"\\1f332";position:absolute;font-size:120px;top:20px;right:30px;animation:_ngcontent-%COMP%_flutuar2 6s ease-in-out infinite}.cenario.espaco[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e272e,#2f3640);color:#fff}.cenario.espaco[_ngcontent-%COMP%]:before{content:"\\1f680";position:absolute;font-size:110px;bottom:30px;left:35px;animation:_ngcontent-%COMP%_flutuar 6s ease-in-out infinite}.cenario.espaco[_ngcontent-%COMP%]:after{content:"\\1fa90";position:absolute;font-size:120px;top:25px;right:40px;animation:_ngcontent-%COMP%_flutuar2 7s ease-in-out infinite}@keyframes _ngcontent-%COMP%_flutuar{0%{transform:translateY(0)}50%{transform:translateY(-12px)}to{transform:translateY(0)}}@keyframes _ngcontent-%COMP%_flutuar2{0%{transform:translateY(0)}50%{transform:translateY(12px)}to{transform:translateY(0)}}.cenario.ativo[_ngcontent-%COMP%]{opacity:1;transform:scale(1)}']});let s=o;return s})();export{N as ChamadorComponent};
